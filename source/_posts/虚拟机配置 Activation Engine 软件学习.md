title: '虚拟机配置 Activation Engine 软件学习'
date: 2011-12-18 16:33:13
tags: 虚拟化
---

大家都知道OVF作为业界广泛支持的虚拟机开放规范，可以实现虚拟机的快速安装和部署.
在OVF学习一文中，我们提到了OVF package包括5类文件（有些文件是可选的），其中包括一个 ovf-env.xml 文件。这个文件主要帮助虚拟机实现相应的软件化配置，比如网络配置，应用软件配置等

当新部署的虚拟机第一次启动的时候，Activation Engine（AE）会执行相应配置过程，包括自启动和协调启动。它们都会从ovf-env.xml提取参数进行配置
   
1. OVF 环境文件
   那么AE是如何定位ovf环境文件的呢？你可以把它理解为先在一个默认的目录下寻找，如果没有找到，它会从所有的块设备进行遍历查找（除了RAM disk，RFID设备，回环设备），找到后，会把文件复制到一个临时的目录。

2. Activation 逻辑文件
   可以理解为需要注册启动的一些服务，这些服务可以完成一些软件配置，这些服务配置需要的参数是从环境文件中提取的。

3. Activation 程序
   这个Activation程序，就是对应逻辑文件中XML中的Program元素中href属性，这些href指出对应程序脚本的位置。


AE的作用，AE就是在系统启动时，提取Activation逻辑文件中的对应配置程序，和环境文件中的对应参数，按照启动的优先级及依赖关系来启动程序，
从而实现了相关的配置。 我们可以理解，1）是原材料 2）是车间生产配置清单  3）车间工人
AE 就是总的管理者。AE下达命令，按照配置清单，让不同的车间工人加工不同的原材料，这样就生产出了活生生的虚拟机（配置好的)
     
   
参考资料：

1. Activation Engine User’s Guide
